<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SG@SG - Player Metrics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Custom Grid for the specific 3 rows of 6 columns request on large screens */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.5rem;
        }

        @media (min-width: 640px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }

        .gauge-container {
            position: relative;
            width: 100%;
            padding-bottom: 60%; /* Aspect ratio */
            height: 0;
            overflow: hidden;
        }

        .gauge-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .needle {
            transition: transform 1s cubic-bezier(0.4, 0.0, 0.2, 1);
            transform-origin: 100px 90px; /* Pivot point matching SVG coordinate space */
        }
        
        .needle-label {
            font-size: 12px;
            font-weight: bold;
            fill: #374151;
            text-anchor: middle;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header Section -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <!-- Paths using ../ to reference root images -->
                <img src="../SG-SG Map.png" alt="SG-SG Map" class="h-12 w-12 mr-4" onerror="this.style.display='none'">
                <h1 class="text-2xl font-bold text-gray-800">SG@SG</h1>
                <img src="../Sterling Grove Flag.png" alt="Sterling Grove Flag" class="h-12 w-12 ml-4" onerror="this.style.display='none'">
            </div>
            <nav class="hidden md:flex space-x-8">
                <a href="index.html" class="text-gray-600 hover:text-green-700 transition duration-300">Home</a>
                <a href="../Index.html#events" class="text-gray-600 hover:text-green-700 transition duration-300">Events</a>
                <a href="../Index.html#leaderboard" class="text-gray-600 hover:text-green-700 transition duration-300">Leaderboard</a>
                <a href="../Index.html#contact" class="text-gray-600 hover:text-green-700 transition duration-300">Contact</a>
            </nav>
            <button class="md:hidden flex items-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto px-6 py-12">
        <section class="bg-white p-8 rounded-lg shadow-lg">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Player Statistics</h2>
                <p class="text-gray-600">Average Net Score Performance</p>
            </div>

            <!-- The Grid Container -->
            <div id="player-grid" class="stats-grid">
                <!-- Javascript will inject the cards here -->
            </div>

            <div class="mt-10 pt-6 border-t border-gray-200 text-center text-sm text-gray-500">
                <p class="font-semibold mb-2">Gauge Legend (Net to Par)</p>
                <div class="flex justify-center items-center gap-4 flex-wrap">
                    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-green-500"></span> Excellent (â‰¤ 0)</span>
                    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-yellow-500"></span> Average (0.1 - 5)</span>
                    <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-red-500"></span> High (> 5)</span>
                </div>
                <p class="mt-2 text-xs">Needle indicates Average Net Score. Range 60-100.</p>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer id="contact" class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                <div>
                    <h3 class="font-bold text-lg mb-4">Sterling Grove Golf and Country Club</h3>
                    <p class="text-gray-400">11440 North Greenwich Boulevard<br>Surprise, AZ 85388</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Quick Links</h3>
                    <ul>
                        <li class="mb-2"><a href="../Index.html" class="text-gray-400 hover:text-white">Home</a></li>
                        <li class="mb-2"><a href="../Index.html#events" class="text-gray-400 hover:text-white">Events</a></li>
                        <li class="mb-2"><a href="../Index.html#leaderboard" class="text-gray-400 hover:text-white">Leaderboard</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-4">Contact Us</h3>
                    <p class="text-gray-400">Paul Benga: <a href="https://wa.me/14806202088" class="hover:text-white" target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                    <p class="text-gray-400">Patrick Schueppert: <a href="https://wa.me/17024996923" class="hover:text-white" target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                    <p class="text-gray-400">Chris Royce: <a href="https://wa.me/17195104311" class="hover:text-white" target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500">
                <p>&copy; 2025 SG@SG. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // ----------------------------------------------------------------
        // PASTE YOUR FULL CSV DATA BELOW
        // Headers must be: Name, Average Gross Score, Average Net Score, Net to Par
        // ----------------------------------------------------------------
        const csvData = `Name,Average Gross Score,Average Net Score,Net to Par
Nate Adams,65,74,2
Jared Strathe,69,75,3
Neil Harris,69,73,1
Jeff De Laveaga,71,73,1
Todd Densley,71,72,0
Paul Benga,73,69,-3
Stewart Polakov,74,70,-2
Eric Weiss,76,77,5
Ben Magnone,79,69,-3
Greg Funk,79,75,3
Shane Bolosan,80,73,1
Rick Meewes,80,77,5
Jon Vrolyks,80,75,3
Mark Lewis,80,70,-2
Ron Marino,80,73,1
Travis Ingram,81,77,5
Korey Jerome,81,74,2
Rich McKeon,81,72,0
Andy Meach,82,75,3
Dan Denham,82,78,6
Clark Koch,82,74,2
Frank Angeloro,82,76,4
Joe Sepessy,82,79,7
Zane Eisenbarth,83,80,8
Bud Scott,83,73,1
Andrew Burnheimer,83,85,13
Dana Beckley,84,78,6
Mike Muller,84,76,4
Steve McCormick,84,74,2
Michael Falagrady,84,79,7
Dusty Wasmund,84,78,6
Richard Lederman,85,72,0
Jamey Davis,85,72,0
Jeff Cloepfil,87,77,5
Chris Ryan,87,74,2
Steve Rosenbluth,88,82,10
Christopher Royce,88,77,5
Jeff Avery,88,77,5
Kevin Barber,89,71,-1
Tracy Copenhaver,89,74,2
Rick Deloney,89,83,11
Scott Benton,90,79,7
Larry Caplan,93,77,5
Chris Beck,93,80,8
Robert Hill,94,76,4
Patrick Schueppert,97,80,8
Trent Dana,100,84,12`;

        // CSV Parser Function
        function parseCSV(data) {
            const lines = data.trim().split(/\r?\n/);
            // Remove header
            const rows = lines.slice(1);
            
            return rows.map(line => {
                // Split by comma, but handle potential quotes if needed (simplified here)
                const cols = line.split(',').map(item => item.trim());
                
                if(cols.length < 4) return null;

                return {
                    name: cols[0],
                    gross: Math.round(parseFloat(cols[1])),
                    net: Math.round(parseFloat(cols[2])),
                    netToPar: parseFloat(cols[3])
                };
            }).filter(item => item !== null);
        }

        // Load and Sort Data
        let playerData = parseCSV(csvData);
        
        // SORT: Lowest Net Score to Highest
        playerData.sort((a, b) => a.net - b.net);

        // Config for the gauge
        const MIN_SCORE = 60;
        const MAX_SCORE = 100;
        
        function getStatus(netToPar) {
            // Logic:
            // <= 0: Green
            // 0.001 - 5: Yellow
            // > 5: Red
            
            if (netToPar <= 0) {
                return { color: "#22c55e", text: "Excellent" }; // Green
            } else if (netToPar > 0 && netToPar <= 5) {
                return { color: "#eab308", text: "Average" }; // Yellow
            } else {
                return { color: "#ef4444", text: "High" }; // Red
            }
        }

        function calculateRotation(score) {
            // Map score to -90deg (min) to 90deg (max)
            const clampedScore = Math.max(MIN_SCORE, Math.min(MAX_SCORE, score));
            const percentage = (clampedScore - MIN_SCORE) / (MAX_SCORE - MIN_SCORE);
            return (percentage * 180) - 90;
        }

        function calculateTipCoordinates(rotationDeg) {
            const length = 75;
            const cx = 100;
            const cy = 90;
            const radians = rotationDeg * (Math.PI / 180);
            const x = cx + length * Math.sin(radians);
            const y = cy - length * Math.cos(radians);
            return { x, y };
        }

        function createPlayerCard(data) {
            const rotation = calculateRotation(data.net);
            const status = getStatus(data.netToPar);
            const needleColor = status.color; // Needle matches status color
            
            // Calculate Relative Score Text
            const sign = data.netToPar > 0 ? "+" : "";
            const relScore = data.netToPar === 0 ? "E" : sign + data.netToPar;
            
            // Calculate label position
            const labelPos = calculateTipCoordinates(rotation);

            return `
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300 flex flex-col">
                    <div class="p-4 border-b border-gray-100 text-center bg-gray-50">
                        <h3 class="text-lg font-bold text-gray-800 truncate" title="${data.name}">${data.name}</h3>
                        <p class="text-sm text-gray-500 font-medium">Gross: <span class="text-gray-800 font-bold">${data.gross}</span></p>
                    </div>
                    
                    <div class="p-4 flex flex-col items-center">
                        <div class="gauge-container">
                            <svg class="gauge-svg" viewBox="0 0 200 120">
                                <!-- Background Arc -->
                                <path d="M20 90 A 80 80 0 0 1 180 90" 
                                      fill="none" 
                                      stroke="#f3f4f6" 
                                      stroke-width="20" 
                                      stroke-linecap="round" />
                                
                                <!-- Needle -->
                                <g class="needle" style="transform: rotate(${rotation}deg);">
                                    <line x1="100" y1="90" x2="100" y2="25" stroke="${needleColor}" stroke-width="4" stroke-linecap="round" />
                                    <circle cx="100" cy="90" r="6" fill="${needleColor}" />
                                </g>
                                
                                <!-- Absolute Score Label at Tip -->
                                <rect x="${labelPos.x - 14}" y="${labelPos.y - 18}" width="28" height="16" rx="4" fill="${needleColor}" />
                                <text x="${labelPos.x}" y="${labelPos.y - 6}" font-size="10" fill="white" font-weight="bold" text-anchor="middle">${data.net}</text>
                                
                                <!-- Tick Marks -->
                                <text x="20" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">${MIN_SCORE}</text>
                                <text x="100" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">80</text>
                                <text x="180" y="110" font-size="10" fill="#9ca3af" text-anchor="middle">${MAX_SCORE}</text>
                            </svg>
                        </div>

                        <div class="mt-[-10px] text-center">
                            <span class="text-3xl font-bold" style="color: ${status.color}">${relScore}</span>
                            <span class="text-xs text-gray-400 block uppercase tracking-wide">To Par</span>
                        </div>
                    </div>
                </div>
            `;
        }

        const gridContainer = document.getElementById('player-grid');
        
        // Generate HTML
        let htmlContent = '';
        playerData.forEach(player => {
            htmlContent += createPlayerCard(player);
        });

        gridContainer.innerHTML = htmlContent;

    </script>
</body>
</html>
